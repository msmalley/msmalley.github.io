<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        <title>Ghosti | Homepage</title>
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="fontawesome/css/all.css">
        <link rel="stylesheet" href="css/pandora.css">
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/bootstrap.js"></script>
        <script type="text/javascript" src="js/robohash.js"></script>
        <script type="text/javascript" src="js/xor.js"></script>
        <script type="text/javascript" src="js/colorthief.js"></script>
        <script type="text/javascript" src="js/xcolor.js"></script>
        <script type="text/javascript" src="js/web3.js"></script>
        <meta property="og:locale" content="en_US" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="The Pandora Collection" />
        <meta property="og:description" content="Where on-chain artists generate on-chain art ..." />
        <meta property="og:url" content="http://smalley.my/pandora/" />
        <meta property="og:site_name" content="http://pandora.gallery/" />
        <meta property="og:image" content="http://smalley.my/pandora/img/fb.png?v=0.0.1" /> 
    </head>
    <body id="body-index" data-robohash="img/robohash/set1.png" data-base="">
        <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top" id="navigation">
            <div class="container">
                <a class="navbar-brand orb" href=""><b>ghost</b>scapes</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <div class="navbar-nav ms-auto orb">
                        <a class="nav-link active" aria-current="page" href="">home</a>
                        <a class="nav-link" href="about/">about</a>
                        <a class="nav-link" href="art/">art</a>
                        <a class="nav-link" href="artists/">artists</a>
                        <a class="nav-link" href="owners/">owners</a>
                    </div>
                </div>
            </div>
        </nav>
        <div class="section sub-header canvased">
            <div class="container">
                <h2 class="amatic atruth">Mutating NFT Landscapes</h2>
                <!--<h2 class="amatic atruth">Welcome to Ever Art</h2>-->
                <!--<h2 class="amatic atruth">Generative Artistic Community</h2>-->
                <!--<h4 class="truth">On-Chain Hot-Swappable Layered NFTs</h4>-->
            </div>
            <canvas id="canvas-sky-1"></canvas>
            <canvas id="canvas-sky-2"></canvas>
        </div>
        <div class="section">
            <div class="container">
                <alert class="alert text-center">
                    <p>&nbsp;</p>
                    <h4 class="pstart smaller" style="line-height:3rem;">Non-Fungible Artists are represented as ERC721 NFTs and each have one of five potential artistic styles that they use to generate a wide range of new NFT artwork, all of which is stored on-chain</h4>
                    <p>&nbsp;</p>
                </alert>
            </div>
        </div>
        <div id="random-nfts"></div>
        <div class="section">
            <div class="container">
                <alert class="alert text-center">
                    <p>&nbsp;</p>
                    <h4 class="pstart smaller" style="line-height:3rem;">Each artist is limited to creating upto 26 unique artworks, so as the universal price of minting new art increases with each piece that is generated, are artists worth more if they don't mint art ?</h4>
                    <p>&nbsp;</p>
                    <hr>
                    
                    <p>&nbsp;</p>
                    <h6 class="pstart">CURRENT MINTING COSTS</h6>
                    <p>&nbsp;</p>
                    <p>&nbsp;</p>
                    <div class="row">
                        <div class="col-md-1"></div>
                        <div class="col-md-4">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h1 class="card-title artist-name amatic">
                                        <a href="artists/">
                                            <i class="fas fa-palette"></i>
                                            <hr>
                                            ARTISTS
                                        </a>
                                    </h1>
                                    <p class="card-text artist-description">
                                        <b class="artists-remain">670</b> of <b class="total-artists">676</b> REMAIN
                                    </p>
                                    <h2 class="artist-cost"><small>ETH</small> <b>0.03</b></h2>
                                    <br /><hr><br />
                                    <a href="#" target="_blank" class="btn btn-outline-dark artist-contract-explorer">GENERATE ARTIST</a>
                                </div>
                            </div>
                            <p>&nbsp;</p>
                        </div>
                        <div class="col-md-2"></div>
                        <div class="col-md-4">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h1 class="card-title artist-name amatic">
                                        <a href="art/">
                                            <i class="far fa-image"></i>
                                            <hr>
                                            ARTWORK
                                        </a>
                                    </h1>
                                    <p class="card-text artist-description">
                                        <b class="art-remain">17,561</b> of <b class="total-art">17,576</b> REMAIN
                                    </p>
                                    <h2 class="art-cost"><small>ETH</small> <b>0.016</b></h2>
                                    <br /><hr><br />
                                    <a href="#" target="_blank" class="btn btn-outline-dark art-contract-explorer">MINT NEW ART</a>
                                </div>
                            </div>
                            <p>&nbsp;</p>
                        </div>
                        <div class="col-md-1"></div>
                    </div>
                    
                    <hr>
                    <p>&nbsp;</p>
                    <h4 class="pstart smaller" style="line-height:3rem;">Despite there being millions of possibilities generated by a single smart contract, an artist must have two unique initials as their identifiers, so there are only 676 potential artists available, which results in a total of up-to only 17,576 unique artworks ...</h4>
                    <p>&nbsp;</p>
                </alert>
            </div>
        </div>
    </body>
    <script type="text/javascript" src="js/pandora.js"></script>
    <script type="text/javascript">
        var can;
        var ctx;
        function set_header_backgrounds(canvas_id)
        {
            can = document.querySelector(canvas_id);
            ctx = can.getContext('2d');
            
            var dpr = 1;
            can.width = window.innerWidth;
            can.height = (window.innerHeight / 100)*80;
            ctx.scale(dpr, dpr);
            
            console.log('can', can);
            console.log('ctx', ctx);
            
            ctx.beginPath();
            
            function setBackgroundLayer(can)
            {   
                var displayCanvas = can;
                var displayWidth = displayCanvas.width;
                var displayHeight = displayCanvas.height;

                function initB() {
                    generateB();
                }

                function generateB() 
                {
                    var x0, y0, w, h;
                    var numRects = 12;
                    var alphaVariation;
                    var angleVariation = Math.PI/32;
                    var r,g,b,baseAlpha;
                    var gradRad;
                    var xMid,yMid;
                    var gradIterates;

                    bgColor = "#ffffff";

                    //rectangle to fill:
                    x0 = 0;
                    y0 = 0;
                    w = displayWidth;
                    h = displayHeight;

                    xMid = x0 + w/2;
                    yMid = y0 + h/2;

                    for (var i = 0; i < numRects; i++) 
                    {

                        //random color
                        r = Math.floor(Math.random()*255);
                        g = Math.floor(Math.random()*255);
                        b = Math.floor(Math.random()*255);			
                        baseAlpha = 0;
                        alphaVariation = 2/numRects;

                        ctx.globalCompositeOperation = "lighter";

                        gradRad = 1.1*h/2;
                        gradIterates = 8;
                        ctx.fillStyle = createLinearFractalGradient(
                            ctx,
                            xMid, 
                            yMid - gradRad, 
                            xMid, 
                            yMid + gradRad,                                             
                            angleVariation,
                            r,
                            g,
                            b,
                            baseAlpha,
                            alphaVariation,
                            gradIterates
                        );

                        //draw
                        ctx.fillRect(x0,y0,w,h);
                    }

                    //background color
                    ctx.globalCompositeOperation = "destination-over";
                    ctx.fillStyle = bgColor;
                    ctx.fillRect(x0,y0,w,h);
                    ctx.globalCompositeOperation = "source-over";
                    ctx.fill();
                }
                initB();
            }
            function createLinearFractalGradient(whichContext,x0,y0,x1,y1,angleVariation,r,g,b,a,alphaVariation,gradIterates) {
                //gradient - constant rgb values, but changes alpha according to subdivision control points.
                var numGradSteps = Math.pow(2,gradIterates);
                var stopNumber = 0;
                var gradRGB = "rgba(" + r + "," + g + "," + b + ","; //must complete with alpha
                var alpha;
                var zeroAlpha = 0.5/255;		
                var angle = (1 - 2*Math.random())*angleVariation;
                var xm = 0.5*(x0 + x1);
                var ym = 0.5*(y0 + y1);
                var ux = x0 - xm;
                var uy = y0 - ym;
                var sinAngle = Math.sin(angle);
                var cosAngle = Math.cos(angle);
                var vx = cosAngle*ux - sinAngle*uy;
                var vy = sinAngle*ux + cosAngle*uy;
                var driftX0 = xm + vx;
                var driftY0 = ym + vy;
                var driftX1 = xm - vx;
                var driftY1 = ym - vy;

                var grad = whichContext.createLinearGradient(driftX0, driftY0, driftX1, driftY1);

                var gradPoints = createRandomData(gradIterates);
                var gradFunctionPoint = gradPoints.first;
                while (gradFunctionPoint != null) {
                    alpha = a + gradFunctionPoint.y*alphaVariation;

                    //avoids scientific notation for small numbers screwing up rgba string:
                    if (alpha < zeroAlpha) {
                        alpha = 0;
                    }
                    else if (alpha > 1) {
                        alpha = 1;
                    }

                    grad.addColorStop(stopNumber/numGradSteps,gradRGB+alpha+")");

                    stopNumber++;
                    gradFunctionPoint = gradFunctionPoint.next;
                }

                return grad;
            }

            //The following function uses a subdivision process to create a random variation without abrupt changes.
            //The "pointList" which is returned contains a linked list of data points with x value increasing from 0 to 1 through
            //the beginning to the end of the list, and the y value of each point defined by the noisy function.
            function createRandomData(iterations) {
                var pointList = {};
                pointList.first = {x:0, y:1};
                var lastPoint = {x:1, y:1}
                var minY = 1;
                var maxY = 1;
                var point;
                var nextPoint;
                var dx, newX, newY;
                var ratio;

                var minRatio = 0.33;

                pointList.first.next = lastPoint;
                for (var i = 0; i < iterations; i++) {
                    point = pointList.first;
                    while (point.next != null) {
                        nextPoint = point.next;

                        ratio = minRatio + Math.random()*(1 - 2*minRatio);
                        newX = point.x + ratio*(nextPoint.x - point.x);

                        //find the smaller interval
                        if (ratio < 0.5) {
                            dx = newX - point.x;
                        }
                        else {
                            dx = nextPoint.x - newX;
                        }

                        newY = point.y + ratio*(nextPoint.y - point.y);
                        newY += dx*(Math.random()*2 - 1);

                        var newPoint = {x:newX, y:newY};

                        //min, max
                        if (newY < minY) {
                            minY = newY;
                        }
                        else if (newY > maxY) {
                            maxY = newY;
                        }

                        //put between points
                        newPoint.next = nextPoint;
                        point.next = newPoint;

                        point = nextPoint;
                    }
                }

                //normalize to values between 0 and 1
                if (maxY != minY) {
                    var normalizeRate = 1/(maxY - minY);
                    point = pointList.first;
                    while (point != null) {
                        point.y = normalizeRate*(point.y - minY);
                        point = point.next;
                    }
                }

                //unlikely that max = min, but could happen if using zero iterations. In this case, set all points equal to 1.
                else {
                    point = pointList.first;
                    while (point != null) {
                        point.y = 1;
                        point = point.next;
                    }
                }

                console.log('points?', pointList);
                return pointList;		
            };
            setBackgroundLayer(can);
        };
        
        function start_rotating_backgrounds()
        {
            set_header_backgrounds("#canvas-sky-1");
            set_header_backgrounds("#canvas-sky-2");
            
            var rotate_backgrounds = function(delay, opacity)
            {
            
                jQuery("#canvas-sky-2").animate({opacity: opacity}, 0);
                
                jQuery("#canvas-sky-2").animate({opacity: 0}, delay);
                jQuery("#canvas-sky-1").animate({opacity: opacity}, delay);

                setTimeout(function()
                {

                    set_header_backgrounds("#canvas-sky-2");
                    jQuery("#canvas-sky-2").animate({opacity: opacity}, delay);
                    jQuery("#canvas-sky-1").animate({opacity: 0}, delay);

                    setTimeout(function()
                    {

                        set_header_backgrounds("#canvas-sky-1");
                        rotate_backgrounds(delay, opacity);

                    }, delay);

                }, delay);
                
            }
            
            rotate_backgrounds(12000, 0.85);
        }
        
        start_rotating_backgrounds();
    </script>
</html>